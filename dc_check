// Discord Notifier Script
// Ez a script Discord √©rtes√≠t√©st k√ºld a Grepolis Auto Farm Collector bet√∂lt√©sekor
// Verzi√≥: 1.0

(function() {
    'use strict';

    // Discord Webhook URL - FONTOS: Itt add meg a webhook URL-t!
    const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1422656911454634195/v20L-RLMi5RBfjoTUtkd3csjVQeL4JLMOvXOorCoZMKgga1UFvHGAM_kNKp56Iy4I2qc';

    // J√°t√©kos n√©v lek√©r√©se
    const playerName = Game.player_name || 'Ismeretlen';

    // Discord √©rtes√≠t√©s k√ºld√©se
    async function sendDiscordNotification() {
        if (!DISCORD_WEBHOOK_URL || DISCORD_WEBHOOK_URL === 'https://discord.com/api/webhooks/1422656911454634195/v20L-RLMi5RBfjoTUtkd3csjVQeL4JLMOvXOorCoZMKgga1UFvHGAM_kNKp56Iy4I2qc') {
            console.warn('‚ö†Ô∏è Discord Webhook URL nincs be√°ll√≠tva');
            return;
        }

        try {
            const now = new Date();
            const timestamp = now.toLocaleString('hu-HU', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            const embed = {
                embeds: [{
                    title: 'üåæ Auto Farm Collector Bet√∂ltve',
                    description: 'A script sikeresen elindult!',
                    color: 15844367, // Narancss√°rga sz√≠n (#f39c12)
                    fields: [
                        {
                            name: 'üë§ J√°t√©kos',
                            value: playerName,
                            inline: true
                        },
                        {
                            name: 'üïê Id≈ëpont',
                            value: timestamp,
                            inline: true
                        },
                        {
                            name: 'üåç Szerver',
                            value: window.location.hostname,
                            inline: false
                        }
                    ],
                    footer: {
                        text: 'Grepolis Auto Farm Collector'
                    },
                    timestamp: now.toISOString()
                }]
            };

            const response = await fetch(DISCORD_WEBHOOK_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(embed)
            });

            if (response.ok) {
                console.log('‚úÖ Discord √©rtes√≠t√©s sikeresen elk√ºldve');
                console.log(`üì§ J√°t√©kos: ${playerName}`);
                console.log(`üìÖ Id≈ëpont: ${timestamp}`);
            } else {
                console.error('‚ùå Discord √©rtes√≠t√©s k√ºld√©se sikertelen:', response.status, response.statusText);
            }
        } catch (error) {
            console.error('‚ùå Hiba a Discord √©rtes√≠t√©s k√ºld√©se sor√°n:', error);
        }
    }

    // √ârtes√≠t√©s k√ºld√©se
    console.log('='.repeat(50));
    console.log('üì¨ Discord Notifier Script');
    console.log('üë§ J√°t√©kos:', playerName);
    console.log('üåç Szerver:', window.location.hostname);
    console.log('='.repeat(50));
    
    sendDiscordNotification();

})();
